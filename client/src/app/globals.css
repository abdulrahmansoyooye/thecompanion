/* ------------------------------------------------------------------------
   Fonts & Tailwind imports
   ------------------------------------------------------------------------ */
@import url("https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&display=swap");
@import "tailwindcss";
@import "tw-animate-css";
@tailwind base;
@tailwind components;
@tailwind utilities;

/* custom variant helper you had (kept for compatibility with your setup) */
@custom-variant dark (&:is(.dark *));

/* ------------------------------------------------------------------------
   Design tokens â€” color, spacing, type, radius, elevation
   Clear semantic names + accessible on-* colors for contrast.
   ------------------------------------------------------------------------ */
:root {
  /* Primary palette (warm orange) + accent (modern blue) */
  --color-primary: #ff6b35;             /* primary brand accent (orange) */
  --color-primary-foreground: #ffffff;  /* text/icons on primary */
  --color-primary-600: #fe5933;

  --color-accent: #2563eb;              /* vivid blue accent */
  --color-accent-foreground: #ffffff;
  --ring-rgb: 37 99 235;                /* rgb parts for ring shadows */

  /* CTA / hero */
  --color-cta: #111827;                 /* dark CTA background */
  --color-cta-gold: #fccc41;            /* gold badge/color */

  /* Neutral scale (light theme) */
  --neutral-50:  #f9fafb;
  --neutral-100: #f3f4f6;
  --neutral-200: #e5e7eb;
  --neutral-300: #d1d5db;
  --neutral-400: #9ca3af;
  --neutral-500: #6b7280;
  --neutral-600: #4b5563;
  --neutral-700: #374151;
  --neutral-800: #1f2937;
  --neutral-900: #0f172a;

  /* Surface & text */
  --color-background: var(--neutral-50);
  --color-surface: #ffffff;
  --color-border: var(--neutral-200);
  --color-muted: var(--neutral-500);
  --color-foreground: var(--neutral-900);

  /* Semantic colors */
  --color-success: #16a34a;
  --color-warning: #f59e0b;
  --color-destructive: #dc2626;

  /* Charts (supporting palette) */
  --chart-1: #fb923c;  /* warm orange */
  --chart-2: #60a5fa;  /* sky blue */
  --chart-3: #7c3aed;  /* purple */
  --chart-4: #06b6d4;  /* teal */
  --chart-5: #f97316;  /* brighter orange */

  /* Radius & spacing tokens */
  --radius-sm: 0.375rem;  /* 6px */
  --radius-md: 0.5rem;    /* 8px */
  --radius-lg: 0.75rem;   /* 12px */
  --radius-xl: 1rem;      /* 16px */
  --radius-2xl: 2rem;     /* 32px */

  --space-1: 0.25rem;     /* 4px */
  --space-2: 0.5rem;      /* 8px */
  --space-3: 0.75rem;     /* 12px */
  --space-4: 1rem;        /* 16px */

  /* Shadows (subtle) */
  --shadow-sm: 0 1px 2px rgba(15, 23, 42, 0.04);
  --shadow-md: 0 6px 18px rgba(15, 23, 42, 0.06);

  /* Fonts */
  --font-bricolage: "Bricolage Grotesque", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  --sidebar: hsl(0 0% 98%);
  --sidebar-foreground: hsl(240 5.3% 26.1%);
  --sidebar-primary: hsl(240 5.9% 10%);
  --sidebar-primary-foreground: hsl(0 0% 98%);
  --sidebar-accent: hsl(240 4.8% 95.9%);
  --sidebar-accent-foreground: hsl(240 5.9% 10%);
  --sidebar-border: hsl(220 13% 91%);
  --sidebar-ring: hsl(217.2 91.2% 59.8%);
}

/* ------------------------------------------------------------------------
   Light -> Dark theme override
   Swap only variables (keeps components identical)
   ------------------------------------------------------------------------ */
.dark {
  --color-background: #071022;     /* deep navy/charcoal background */
  --color-surface: #0f1724;        /* card/surface in dark */
  --color-border: #1f2937;
  --color-foreground: #eef6ff;     /* gentle off-white text for contrast */
  --color-muted: #94a3b8;
  /* In dark, use brighter accents */
  --color-primary: #ff7a4a;        /* slightly brighter orange in dark */
  --color-accent: #60a5fa;         /* lighter blue for rings in dark */
  --ring-rgb: 96 165 250;
  --sidebar: hsl(240 5.9% 10%);
  --sidebar-foreground: hsl(240 4.8% 95.9%);
  --sidebar-primary: hsl(224.3 76.3% 48%);
  --sidebar-primary-foreground: hsl(0 0% 100%);
  --sidebar-accent: hsl(240 3.7% 15.9%);
  --sidebar-accent-foreground: hsl(240 4.8% 95.9%);
  --sidebar-border: hsl(240 3.7% 15.9%);
  --sidebar-ring: hsl(217.2 91.2% 59.8%);
}

/* ------------------------------------------------------------------------
   Theme helpers (map semantic tokens to local names used in components)
   ------------------------------------------------------------------------ */
@theme inline {
  --bg: var(--color-background);
  --surface: var(--color-surface);
  --fg: var(--color-foreground);
  --muted: var(--color-muted);
  --primary: var(--color-primary);
  --on-primary: var(--color-primary-foreground);
  --accent: var(--color-accent);
  --on-accent: var(--color-accent-foreground);
  --border-color: var(--color-border);
  --ring-color-rgb: var(--ring-rgb);
  --cta: var(--color-cta);
  --cta-gold: var(--color-cta-gold);
  --success: var(--color-success);
  --destructive: var(--color-destructive);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
}

/* ------------------------------------------------------------------------
   Accessibility & UX helpers
   - focus rings, reduced-motion, visually-hidden
   ------------------------------------------------------------------------ */
:focus {
  outline: none;
}
:focus-visible {
  box-shadow: 0 0 0 4px rgba(var(--ring-color-rgb), 0.12);
  border-radius: var(--radius-md);
}

.sr-only {
  position: absolute !important;
  height: 1px; width: 1px;
  overflow: hidden;
  clip: rect(1px, 1px, 1px, 1px);
  white-space: nowrap; /* added line */
}

/* Respect user's reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.001ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.001ms !important;
    scroll-behavior: auto !important;
  }
}

/* ------------------------------------------------------------------------
   Base layer (use Tailwind @apply where suited)
   - keep body/surface styles in one place
   ------------------------------------------------------------------------ */
@layer base {
  * {
    /* default border & outline color bound to tokens (Tailwind utilities still work) */
    @apply outline-none;
    box-sizing: border-box;
  }

  html, body, #__next {
    height: 100%;
  }

  body {
    @apply m-0 p-0;
    background: var(--bg);
    color: var(--fg);
    font-family: var(--font-bricolage);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    line-height: 1.45;
    -webkit-tap-highlight-color: transparent;
  }

  /* sensible container for your app */
  main {
    @apply mx-auto;
    max-width: 1400px;
    padding: 2.5rem 3.5rem; /* desktop padding */
    gap: 2rem;
    display: flex;
    flex-direction: column;
    min-height: 100%;
  }

  h1, h2, h3 {
    color: var(--fg);
    line-height: 1.12;
  }

  h1 { @apply text-3xl font-bold; }
}

/* ------------------------------------------------------------------------
   Components (organized, accessible, and consistent)
   Keep Tailwind utility usage, but rely on tokens for colors/radius.
   ------------------------------------------------------------------------ */
@layer components {
  /* Cards */
  .card {
    @apply bg-surface text-[inherit] rounded-[var(--radius-lg)] border p-4;
    border-color: var(--border-color);
    box-shadow: var(--shadow-sm);
  }

  /* Navbar */
  .navbar {
    @apply flex items-center justify-between w-full py-4;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
    border-bottom: 1px solid var(--border-color);
    padding-inline: 3.5rem;
  }

  /* Primary button */
  .btn-primary {
    @apply inline-flex items-center gap-2 font-semibold cursor-pointer select-none;
    background-color: var(--primary);
    color: var(--on-primary);
    padding: 0.5rem 1rem;
    border-radius: var(--radius-md);
    box-shadow: 0 2px 8px rgba(15,23,42,0.06);
    transition: transform 120ms ease, box-shadow 120ms ease, opacity 120ms ease;
  }
  .btn-primary:hover { transform: translateY(-1px); }
  .btn-primary:active { transform: translateY(0); opacity: 0.95; }

  /* Ghost / outline button (signin button) */
  .btn-ghost {
    @apply inline-flex items-center gap-2 font-semibold;
    background: transparent;
    color: var(--fg);
    border: 1px solid var(--border-color);
    padding: 0.5rem 1rem;
    border-radius: var(--radius-2xl);
  }

  .cta-section {
    @apply rounded-[var(--radius-2xl)] text-center p-8;
    background: var(--cta);
    color: var(--on-primary);
    display: flex;
    flex-direction: column;
    gap: 1rem;
    align-items: center;
    justify-content: center;
  }
  .cta-badge {
    @apply inline-block rounded-[var(--radius-2xl)] px-3 py-1 text-sm font-medium;
    background: var(--cta-gold);
    color: #111827;
  }

  /* Reusable input */
  .input {
    @apply w-full rounded-[var(--radius-md)] border px-3 py-2;
    background: var(--surface);
    color: var(--fg);
    border-color: var(--border-color);
  }
  .input:focus {
    box-shadow: 0 0 0 4px rgba(var(--ring-color-rgb), 0.12);
    border-color: var(--accent);
  }

  /* Companion cards/grid (example sections from your UI) */
  .home-section {
    @apply flex gap-6 justify-between items-start w-full;
  }
  .companions-grid {
    @apply flex flex-wrap gap-4 w-full justify-between;
  }
  .companion-card {
    @apply flex flex-col p-4 gap-4 w-full max-w-[410px];
    background: var(--surface);
    border-radius: var(--radius-2xl);
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-md);
  }
  .subject-badge {
    @apply inline-block text-sm font-medium px-2 py-1 rounded-full;
    background: var(--primary);
    color: var(--on-primary);
    text-transform: capitalize;
  }
  .companion-bookmark {
    @apply inline-flex items-center justify-center rounded-full p-2 cursor-pointer;
    background: var(--accent);
    color: var(--on-accent);
  }

  /* Avatar / media sizes */
  .companion-avatar {
    width: 300px;
    height: 300px;
    @apply flex items-center justify-center rounded-lg overflow-hidden;
  }
  @media (max-width: 640px) {
    .companion-avatar { width: 100px; height: 100px; }
    .navbar { padding-inline: 1rem; }
    main { padding-inline: 0.5rem; }
  }

  /* Transcript area */
  .transcript {
    @apply relative flex flex-col gap-4 w-full;
    min-height: 220px;
  }
  .transcript-message {
    @apply overflow-y-auto w-full pr-2;
    font-size: 1.125rem; /* 18px */
  }
  .transcript-fade {
    @apply pointer-events-none absolute bottom-0 left-0 right-0;
    height: 10rem;
    background: linear-gradient(180deg, transparent, var(--bg));
  }
}

/* ------------------------------------------------------------------------
   Utilities (small helpers)
   ------------------------------------------------------------------------ */
@layer utilities {
  /* Hide native scrollbar (for custom scroll styles) */
  .no-scrollbar::-webkit-scrollbar { display: none; }
  .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

  /* Simple utility to get on-* color for text over backgrounds */
  .text-on-primary { color: var(--on-primary); }
  .bg-primary { background: var(--primary); color: var(--on-primary); }

  /* Small badge */
  .badge {
    @apply inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full;
    background: rgba(0,0,0,0.06);
    color: var(--fg);
  }
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}
